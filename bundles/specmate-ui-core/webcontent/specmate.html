<html>
<body>
	<script type="text/javascript" src="js-lib/d3.v3.min.js"></script>
	<script type="text/javascript" src="js-lib/jquery-2.2.0.js"></script>
	<script type="text/javascript" src="js-lib/knockout-3.4-min.js"></script>
	<script type="text/javascript" src="js-lib/EventSource.js"></script>
	<script type="text/javascript"
		src="js-lib/knockout-ondemand-observable.js"></script>
	<script type="text/javascript" src="js/specmate.js"></script>

	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="css/specmate.css" />

	<!--  templates TODO: move to separate files -->
	<script type="text/html" id="blueprint-editor-template">
		<div class="specmate-column-header">
			<div class="specmate-column-header-menu">
				<a class="specmate-action-link"  href="" data-bind="click:model.modelFactory.newAction"><i class="fa fa-plus-circle" /> New Action</a>
				<a class="specmate-action-link"  href="" data-bind="click:function(){model.modelFactory.newConnection($root.selected2());}"><i class="fa fa-plus-circle" /> Connect</a>
			</div>
		</div>
		<div style="width:100%, height:100%, overflow:auto">
    	<svg width="1000" height="1000"  xmlns="http://www.w3.org/2000/svg" data-bind="foreach: contents">
			<g data-bind="drag:{x:x,y:y}" >
  				<rect width="220" height="50" rx="5" ry="5" 
					stroke="#08bd8d" 
					data-bind="event: {click:function(obj){$root.toggleSelected2(obj)}, dblclick: $root.selected }, attr: {fill: contents().length>0?'#F9A70C':'#baecdf', 'stroke-width': $root.isSelected2($data)?'3px':'1px'}"></rect> 
  				<text y="30" x="10" data-bind="text:shortName" font-family="sans-serif" font-size="16" fill="black" ></text>
			</g>
		<!-- ko foreach:successors -->
					<line data-bind="attr: {x1: $parent.lineX(), y1:$parent.lineY(), x2: lineX(), y2:y()}"  style="stroke:#08bd8d;stroke-width:1" />
				<!-- /ko -->
		</svg>
		</div>
	</script>
	
	<script type="text/html" id="slice-procedure-editor-template">
		<div class="specmate-column-header">
			<div class="specmate-column-header-menu"></div>
		</div>
		<div class="specmate-test-procedure">
			<table>
				<tr><th>#</th><th>Description</th><th>Expected Result</th></tr>
				<!-- ko foreach:steps -->
					<tr><td>Step <span data-bind="text:1+$index()"></span></td><td><span data-bind="text:description"></span></td><td><span></span></td></tr>
				<!-- /ko -->
			</table>
		</div>
	</script>
	
	<script type="text/html" id="slice-meta-editor-template">
			 <div class="specmate-editor-panel">
                <span class="specmate-editor-label">Start from</span><br/>
                <element-chooser params="resource: $root.resource, selectionObservable:from"></element-chooser>
            </div>
			 <div class="specmate-editor-panel">
                <span class="specmate-editor-label">Go To</span><br/>
                 <element-chooser params="resource: $root.resource, selectionObservable:to"></element-chooser>
            </div>
	</script>

	<div id="specmate-container">
		<div class="specmate-head">
			<div id="user-menu">
				<img src="images/user-icon.png" height="16pt" /> Maximilian Junker
			</div>
			<div id="specmate-title">SpecMate</div>
		</div>
	
		<div id="specmate-content">
			<div id="specmate-content-body">
				<div id="specmate-project-explorer">
					<action-bar params="selectionObservable:$root.selected"></action-bar>
					<project-explorer style="height:100%" params="resource: resource, selectionObservable:$root.selected"></project-explorer>
				</div>
				<div id="specmate-editors">
				<!-- ko if:selected -->
				<editors params="editorItem: selected"></editors>
				<!-- /ko -->
				</div>
			</div>
		</div>
		
		<div id="specmate-footer"></div>
	</div>

	<script type="text/javascript">
		ko.applyBindings(model.viewModel);
	</script>

</body>
</html>