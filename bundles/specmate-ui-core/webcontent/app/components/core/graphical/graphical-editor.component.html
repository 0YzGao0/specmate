<div *ngIf="contents" class="row">
    <div class="col-8" [class.maximized]="isMaximized">
        <div class="card">
            <h5 class="card-header">{{name}}
                <button *ngIf="!isMaximized" (click)="maximize()" class="btn btn-sm btn-secondary pull-right"><i class="fa fa-window-maximize" aria-hidden="true"></i></button>
                <button *ngIf="isMaximized" (click)="unMaximize()" class="btn btn-sm btn-secondary pull-right"><i class="fa fa-window-restore" aria-hidden="true"></i></button>
                <button *ngIf="!isGridShown" (click)="showGrid()" class="btn btn-sm btn-secondary pull-right"><i class="fa fa-th" aria-hidden="true"></i></button>
                <button *ngIf="isGridShown" (click)="hideGrid()" class="btn btn-sm btn-secondary pull-right"><i class="fa fa-th" aria-hidden="true"></i></button>
            </h5>
            <div class="card-block tool-bar">
                <button *ngFor="let tool of tools" [title]="tool.name" class="{{'btn btn-sm btn-outline-' + tool.color}}" [ngClass]="{'active': isActive(tool)}" (click)="activate(tool)">
                    <i class="{{'fa fa-' + tool.icon}}" aria-hidden="true"></i>&nbsp;{{tool.name}}
                </button>
                <button (click)="delete()" title="Clear" class="btn btn-sm btn-outline-danger pull-right">
                    <i class="fa fa-trash " aria-hidden="true"></i>&nbsp;Clear
                </button>
            </div>
            <div class="editor" [class.editor-maximized]="isMaximized">
                <svg:svg (click)="click($event)" [attr.width]="editorDimensions.width" [attr.height]="editorDimensions.height" [style.cursor]="cursor">

                    <!-- GRID -->
                    <ng-container *ngIf="isGridShown">
                        <svg:defs>
                            <svg:pattern id="smallGrid" [attr.width]="gridSize" [attr.height]="gridSize" patternUnits="userSpaceOnUse">
                                <svg:path [attr.d]="'M ' + gridSize + ' 0 L 0 0 0 ' + gridSize" fill="none" stroke="gray" stroke-width="0.5"/>
                            </svg:pattern>
                            <svg:pattern id="grid" [attr.width]="gridSize * 10" [attr.height]="gridSize * 10" patternUnits="userSpaceOnUse">
                                <svg:rect [attr.width]="gridSize * 10" [attr.height]="gridSize * 10" fill="url(#smallGrid)"/>
                                <svg:path [attr.d]="'M '+ gridSize * 10 + ' 0 L 0 0 0 ' + gridSize * 10" fill="none" stroke="gray" stroke-width="1"/>
                            </svg:pattern>
                        </svg:defs>

                        <svg:rect width="100%" height="100%" fill="url(#grid)" />
                    </ng-container>

                    <!-- CEG ELEMENTS -->
                    <ng-container *ngIf="isCEGModel">
                        <ng-container *ngFor="let connection of connections">
                            <svg:g ceg-graphical-connection [connection]="connection" [nodes]="nodes" [selected]="isSelected(connection)" [valid]="isValidElement(connection)" (click)="select(connection, $event)"></svg:g>
                        </ng-container>
                        <ng-container *ngFor="let node of nodes">
                            <svg:g ceg-graphical-arc [node]="node" [connections]="connections" [nodes]="nodes" [type]="node.type"></svg:g>
                            <svg:g ceg-graphical-node [node]="node" [selected]="isSelected(node)" [valid]="isValidElement(node)" (click)="select(node, $event)" id="{{node.url}}"></svg:g>
                        </ng-container>
                    </ng-container>

                    <!-- PROCESS ELEMENTS -->
                    <ng-container *ngIf="isProcessModel">
                        <ng-container *ngFor="let connection of connections">
                            <svg:g process-graphical-connection [connection]="connection" [nodes]="nodes" [selected]="isSelected(connection)" [valid]="isValidElement(connection)" (click)="select(connection, $event)"></svg:g>
                        </ng-container>
                        <ng-container *ngFor="let node of nodes">
                            <svg:g process-graphical-connection [connection]="connection" [nodes]="nodes" [selected]="isSelected(connection)" [valid]="isValidElement(connection)" (click)="select(connection, $event)"></svg:g>
                            <svg:g process-step-graphical-node [node]="node" [selected]="isSelected(node)" [valid]="isValidElement(node)" (click)="select(node, $event)" id="{{node.url}}"></svg:g>
                            <svg:g process-decision-graphical-node [node]="node" [selected]="isSelected(node)" [valid]="isValidElement(node)" (click)="select(node, $event)" id="{{node.url}}"></svg:g>
                            <svg:g process-start-graphical-node [node]="node" [selected]="isSelected(node)" [valid]="isValidElement(node)" (click)="select(node, $event)" id="{{node.url}}"></svg:g>
                            <svg:g process-end-graphical-node [node]="node" [selected]="isSelected(node)" [valid]="isValidElement(node)" (click)="select(node, $event)" id="{{node.url}}"></svg:g>
                        </ng-container>
                    </ng-container>
                </svg:svg>
            </div>
        </div>
    </div>
    <div class="col-4">
        <graphical-element-details *ngFor="let element of contents" [element]="element" [hidden]="element !== selectedNode"></graphical-element-details>
    </div>
</div>